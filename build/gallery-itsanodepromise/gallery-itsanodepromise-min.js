YUI.add("gallery-itsanodepromise",function(e,t){"use strict";var n=e.Node,r=document.implementation.hasFeature("MutationEvents","2.0"),i=250,s="availableagain",o="unavailableagain",u="contentreadyagain";n.fireAvailabilities=function(t){var n=this,r;n._loopingEvents||(n._loopingEvents={}),r=n._loopingEvents,r[t]||(r[t]=function(){n.availablePromise(t).then(function(i){e.fire(s,{target:i,type:s}),n.unavailablePromise(t).then(function(n){e.fire(o,{target:n,type:o}),r[t]()})}),n.contentreadyPromise(t).then(function(t){e.fire(u,{target:t,type:u})})},r[t]())},n.availablePromise=function(t,n){var r=new e.Promise(function(i,s){var o=e.once("available",function(){i(e.one(t))},t);n&&e.later(n,null,function(){var e="node "+t+" was not available within "+n+" ms";s(new Error(e)),r.getStatus()==="pending"&&o.detach()})});return r},n.contentreadyPromise=function(t,n){var r=new e.Promise(function(i,s){var o=e.once("contentready",function(){i(e.one(t))},t);n&&e.later(n,null,function(){var e="the content of node "+t+" was not ready within "+n+" ms";s(new Error(e)),r.getStatus()==="pending"&&o.detach()})});return r},n.unavailablePromise=function(t,n){var s=this,o,u;return n=n||{},n.afteravailable?(o=e.merge(n),delete o.afteravailable,this.availablePromise(t,n.timeout).then(e.bind(s.unavailablePromise,s,t,o))):(u=new e.Promise(function(s,o){var a,f,l=n&&n.timeout,c=n&&n.intervalNonNative;e.one(t)?(r?f=e.after("DOMNodeRemoved",function(){e.soon(function(){e.one(t)||(f.detach(),s(t))})}):a=e.later(c||i,null,function(){e.one(t)||(a.cancel(),s(t))},null,!0),l&&e.later(l,null,function(){var n="node "+t+" was not removed within "+l+" ms";!r&&!e.one(t)?s(t):o(new Error(n)),f&&u.getStatus()==="pending"&&f.detach()})):s(t)}),u)},r&&e.mix(e.Node.DOM_EVENTS,{DOMNodeRemoved:!0}),e.Node.prototype.availablePromise=n.availablePromise,e.Node.prototype.contentreadyPromise=n.contentreadyPromise,e.Node.prototype.unavailablePromise=n.unavailablePromise},"gallery-2013.09.04-21-56",{requires:["yui-base","yui-later","node-base","timers","promise"]});
